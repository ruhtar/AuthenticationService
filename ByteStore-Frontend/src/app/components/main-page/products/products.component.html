<div id="page-container">
  <app-header></app-header>
  <div class="filter-container">
    <div class="filter-section">
      <mat-form-field>
        <mat-label for="sort-select">Sort by:</mat-label>
        <mat-select
          id="sort-select"
          [(ngModel)]="selectedOption"
          (selectionChange)="sortProducts()"
        >
          <mat-option value="name">Name</mat-option>
          <mat-option value="priceAsc">Price - Asc</mat-option>
          <mat-option value="priceDesc">Price - Desc</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="filter-section">
      <mat-form-field>
        <mat-label>Search products</mat-label>
        <input
          matInput
          type="search"
          [(ngModel)]="filterValue"
          (ngModelChange)="searchProducts()"
        />
      </mat-form-field>
    </div>

    <div class="filter-section">
      <mat-label for="price-filter">Filter by Price:</mat-label>
      <div class="price-filter-inputs">
        <mat-form-field>
          <span class="dollar-sign">$</span>
          <input
            matInput
            type="number"
            id="min-price"
            min="0"
            placeholder="Min Price"
            [(ngModel)]="minPrice"
            [value]="minPrice"
          />
        </mat-form-field>
        <mat-form-field>
          <span class="dollar-sign">$</span>
          <input
            matInput
            type="number"
            min="0"
            id="max-price"
            placeholder="Max Price"
            [(ngModel)]="maxPrice"
            [value]="maxPrice"
          />
        </mat-form-field>
      </div>
    </div>
    <button (click)="filterByPrice()" class="filter-price-button">Apply</button>
  </div>

  <section class="products">
    <div *ngFor="let product of exibidProducts" class="product-card">
      <img [src]="product.imageStorageUrl" alt="Product Image" />
      <div class="product-img-name-detail">
        <h2 class="product-name">{{ product.name }}</h2>
      </div>

      <p class="product-price">
        <i class="fa-solid fa-hand-holding-dollar"></i>
        $ {{ product.price | number: "1.2-2" }}
      </p>
      <!-- <p class="product-quantity">Stock: {{ product.productQuantity }}</p> -->

      <button [routerLink]="['/products', product.productId]" class="see-more">
        See more
        <i class="fa-solid fa-plus"></i>
      </button>
    </div>
    <mat-paginator
      [length]="50"
      [pageSize]="pageSize"
      [pageIndex]="pageIndex"
      [pageSizeOptions]="pageSizeOptions"
      (page)="pageChanged($event)"
    ></mat-paginator>
  </section>
</div>
<app-footer></app-footer>
